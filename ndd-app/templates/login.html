{% load static %}

<html>
    <head>
        <title>Login</title>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">

        <script src="{% static 'js/vue.min.js' %}"></script>

        <style>
            .bg-img {
                background-image: url("{% static 'images/bg-ndd.jpg' %}");
                background-position: center;
                background-size: cover; 
            }
        </style>
    </head>

    <body class="bg-light bg-img">
        <div id="login-page" class="container h-100 position-relative">
            <div class="col-md-5 position-absolute" style="top: 30%; left:50%; transform: translate(-50%,-30%);">
                <div class="card shadow rounded-3" style="opacity:0.8;">
                    <div class="card-header">
                        <h2 class="m-2 text-center">Login</h2>
                    </div>
            
                    <div class="card-body">
                        <div v-if="error" class="text-danger"><i class="fa fa-times"></i>&nbsp;Incorrect Username or Password</div>
                    
                        <div class="input-group input-group-lg mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fa fa-user"></i></span>
                            </div>
                            <input type="text" name="username" class="form-control" placeholder="Username" v-model="login_form.username" @keyup.enter="login">
                        </div>

                        <div class="input-group input-group-lg mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fa fa-lock"></i></span>
                            </div>
                            <input type="password" class="form-control" placeholder="Password" v-model="login_form.password" @keyup.enter="login">
                        </div>

                        <div class="custom-control custom-checkbox mb-1">
                            <input type="checkbox" class="custom-control-input" id="remember_me" v-model="login_form.remember_me" @keyup.enter="login">
                            <label class="custom-control-label" for="remember_me">&nbsp;Remember me</label>
                        </div>

                        <button ref="submit" class="btn btn-primary btn-lg float-right" @click="login"><i class="fa fa-sign-in"></i>&nbsp;Login</button>
                    </div>
                </div>
            </div>
        </div>


        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>

        <script type="application/javascript" src="{% static 'js/utility/functions.js' %}"></script>

        <script type="application/javascript">

            var login_page = new Vue( {
            
                el: '#login-page',
                data: {
                    error: false,
                    login_form: {
                        username: '',
                        password: '',
                        remember_me: false
                    }
                },
                methods: {
                    login() {
                        this.error = false
                        api("/api-login/", "POST", this.login_form).then((data) => {
                            if(data == 'Success') {
                                window.location.replace("/booking");
                            }
                            else {
                                this.error = true
                                this.login_form.password = ''
                                return false
                            }             
                        })
                    },
                }
            })

        </script>
        
    </body>
</html>