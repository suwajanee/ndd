<div class="modal fade" id="modelAddFieldAPLL" tabindex="-1" role="dialog" aria-hidden="true">    
    {% verbatim %}
        <div class="modal-dialog" role="document" style="min-width: 70%;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title w-100 text-center">Add fields</h2>
                    <button class="close" data-dismiss="modal" aria-label="Close" style="outline: none; ">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body p-5">
                    <table class="table table-bordered">
                        <thead class="text-center">
                            <th>Routing</th>
                            <th>CNTR No</th>
                            <th>Drayage Charge</th>
                            <th>Gate Charge</th>
                            <th>Vat</th>
                        </thead>
                        <tbody>
                            <td><textarea class="form-control" rows=10 v-model="routing"></textarea></td>
                            <td><textarea class="form-control" rows=10 v-model="container"></textarea></td>
                            <td><textarea class="form-control" rows=10 v-model="drayage"></textarea></td>
                            <td><textarea class="form-control" rows=10 v-model="gate"></textarea></td>
                            <td><textarea class="form-control" rows=10 v-model="vat"></textarea></td>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer px-5 py-3">
                    <button class="btn btn-primary" @click="addFieldsApll">Add</button>
                </div>
            </div>
        </div>
    {% endverbatim %}
</div>


<script>

    var add_apll_modal = new Vue( {
        
        el: '#modelAddFieldAPLL',
        data: {
            routing: '',
            container: '',
            drayage: '',
            gate: '',
            vat: '',
        },

        methods: {
            addFieldsApll() {
                var routing = this.routing.split('\n')
                var container = this.container.split('\n')
                var drayage = this.drayage.split('\n')
                var gate = this.gate.split('\n')
                var vat = this.vat.split('\n')

                for(invoice_detail in summary_invoice_details.invoice_detail_list) {
                    var status = false
                    var details = summary_invoice_details.invoice_detail_list[invoice_detail].detail

                    if(summary_invoice_details.invoice_detail_list[invoice_detail].work.container_no.trim() == container[invoice_detail].trim()) {
                        status = true
                    }
                   
                    if(status) {
                        details.routing = routing[invoice_detail]

                        summary_invoice_details.invoice_detail_list[invoice_detail].drayage_charge.drayage = drayage[invoice_detail].replace(',', '')
                        summary_invoice_details.invoice_detail_list[invoice_detail].gate_charge.gate = gate[invoice_detail].replace(',', '')
                        summary_invoice_details.invoice_detail_list[invoice_detail].gate_charge.vat = vat[invoice_detail].replace(',', '')
                    }
                }
                $('#modelAddFieldAPLL').modal('hide')
            }
        }
    })

</script>