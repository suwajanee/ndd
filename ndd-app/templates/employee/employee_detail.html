<table class="table table-hover table-bordered col-9 container text-center">
    <thead>
        <th style="width: 60px;">
            #
        </th>
        <th>
            Name
        </th>
        {% if not job %}
            <th>
                Job
            </th>
        {% endif %}
        <th>
            Tel
        </th>
        <th>
            Account
        </th>
        {% if job == 'driver' %}
            <th style="width: 100px;">
                License
            </th>
            <th>
                PAT Expired
                <button class="btn btn-sm btn-outline-info float-right px-1" @click="edit=!edit"><i class="fa fa-edit"></i></button>
            </th>
        {% endif %}
        {% if page == 'salary' %}
            <th>
                Salary
            </th>
        {% endif %}
        <!-- <th style="width: 60px;">
            Edit
        </th> -->
    </thead>
    <tbody v-if="employees.length">
        <tr v-for="(emp, index) in employees" >
            {% if job == 'driver' %}
                {% verbatim %}
                    <td>
                        {{ index+1 }}
                    </td>
                    <td class="text-left">
                        {{ emp.employee.first_name }} {{ emp.employee.last_name }}
                    </td>
                    <td>
                        {{ emp.employee.detail.tel|formatTel }}
                    </td>
                    <td>
                        {{ emp.employee.detail.account|formatAccount }}
                    </td>
                    <td>
                        {{ emp.license_type }}
                    </td>
                    <td :class="{'table-warning': emp.pat_expired && (date_compare > emp.pat_expired)}" style="max-width: 100px;">
                        <input v-if="edit" type="date" class="form-control">
                        <template v-else>
                            {{ emp.pat_expired|formatDate }}
                        </template>
                    </td>
                    <td class="border-white bg-white" style="width: 60px;">
                        <button 
                            class="btn btn-sm btn-outline-warning rounded-circle py-1"
                            data-toggle="modal" data-target="#modalEmployee" @click="employeeModal(emp.employee, emp.license_type, emp.pat_pass_expired_date)"
                        >
                            <i class="fas fa-info"></i>
                        </button>
                    </td>
                {% endverbatim %} 
            {% elif page == 'salary' %}
                {% verbatim %}
                    <td>
                        {{ index+1 }}
                    </td>
                    <td class="text-left">
                        {{ emp.employee.first_name }} {{ emp.employee.last_name }}
                    </td>
                    <td>
                        {{ emp.employee.job.job_title }}
                    </td>
                    <td>
                        {{ emp.employee.detail.tel|formatTel }}
                    </td>
                    <td>
                        {{ emp.employee.detail.account|formatAccount }}
                    </td>
                    <td class="text-right">
                        {{ emp.salary|currencyCommas }}
                    </td>
                    <td class="border-white bg-white" style="width: 60px;">
                        <button class="btn btn-sm btn-outline-secondary"><i class="fas fa-history"></i></button>
                    </td>
                {% endverbatim %} 
            {% else %} 
                {% verbatim %}
                    <td>
                        {{ index+1 }}
                    </td>
                    <td class="text-left">
                        {{ emp.first_name }} {{ emp.last_name }}
                    </td>
                    <td v-if="! job" class="text-capitalize">
                        {{ emp.job.job_title }}
                    </td>
                    <td>
                        {{ emp.detail.tel|formatTel }}
                    </td>
                    <td>
                        {{ emp.detail.account|formatAccount }}
                    </td>
                    <td class="border-white bg-white" style="width: 60px;">
                        <button 
                            class="btn btn-sm btn-outline-warning rounded-circle py-1"
                            data-toggle="modal" data-target="#modalEmployee" @click="employeeModal(emp)"
                        >
                            <i class="fas fa-info"></i>
                        </button>
                    </td>
                {% endverbatim %}       
            {% endif %}
        </tr>
    </tbody>
    <tbody v-else>
        <tr>
            <td colspan=7 class="text-center text-secondary">
                ไม่พบข้อมูล
            </td>
        </tr>
    </tbody>
    
</table>

{% include 'employee/employee_modal.html' %}